---
title: 位运算
date: 2021-01-06 09:52:13
tags:
description: 计算机数据都是以二进制方式存储，二进制的运算效率往往是很高的
---


一、位运算
二进制：计算机中所有数据的存储和运算都是以二进制（补码）的形式进行的, 数字是四个字节，一个字节为8位，则一个数字是由32位二进制表示的
	a -> 97, A -> 65, '0' -> 48
举例：5 , -5
	原码：
	5: 0000 0000  0000 0000  0000 0000  0000 0101
	-5:1000 0000  0000 0000  0000 0000  0000 0101
	反码：（将原码）符号位不变，数值位取反（0变1，1变0）
	5: 0000 0000  0000 0000  0000 0000  0000 0101
	-5:1111 1111  1111 1111  1111 1111  1111 1010
	补码：负数等于反码+1,如果负数反码全是1, 则最后补码全是0, 正数与源码反码一样。
	5: 0000 0000  0000 0000  0000 0000  0000 0101
	-5:1111 1111  1111 1111  1111 1111  1111 1011
结论：正数的原码、反码、补码都是一样的
	0：0000 0000  0000 0000  0000 0000  0000 0000
	-0:1000 0000  0000 0000  0000 0000  0000 0000
位运算符：7个
	&（按位与，and）：两个数字同为1，则为1，否则就是0
	|（按位或，or）：两个数字只要有一个是1，则结果为1
	^（按位异或，xor）：两个数字不相同为1，相同为0
	~（按位取反，not）：0变1，1变0
	<<（左移，shl）：a shl b，把二进制数a左移b位，在后面补0，相当于a乘以2的b次方，保留符号位
	>>（右移，shr）：把a右移b位（去掉末b位），相当于a除以2的b次方，高位补原符号位（0或1）， 保留符号位
	>>>（无符号右移）：把a右移b位（去掉末b位），相当于a除以2的b次方，高位补0

```js
	let a = 5, b = -5, c = 2;

	// a b c 的 补码分别为
	// 5: 0000 0000 0000 0000 0000 0000 0000 0101
	// -5:1000 0000 0000 0000 0000 0000 0000 0101
	// 2  0000 0000 0000 0000 0000 0000 0000 0010
	a & c  // 0

	a | c // 7

	a ^ c // 7 
    
	~a    // -6  // 5 的补码全取反=> 1111 1111 1111 1111 1111 1111 1111 1010 => 减去1算出反码 => 1111 1111 1111 1111 1111 1111 1111 1001 => 反码推算出源码 =>  1000 0000 0000 0000 0000 0000 0000 0110 => -6

	~b    // 4   //  -5 的补码1111 1111  1111 1111  1111 1111  1111 1011全取反 => 0000 0000 0000 0000 0000 0000 0000 0100 => 推导出源码 => 4

	a << 2 // 20	// 0000 0000 0000 0000 0000 0000 0001 0100 

	b >> 2 // -2

	b << 2 // -20

	b >>> 2 // 1073741822


```

应用场景

& 按位与
- 取模 a % b == a & (b - 1) , 只能在b 为 2^n时使用
- 奇偶数判断,正负数都可以
	- 偶数 a & 1 = 0;
	- 奇数 a & 1 = 1;

^ 异或
	一个数字异或另一个数字两次等于概数本身
- 两数字交换
	- a = 3, b = 4
  	- a = a ^ b
  	- b = a ^ b
  	- a = a ^ b
  	- => a = 4, b = 3
- 给定一个数组，这个数组中所有的数字都出现两次，只有一个数字出现一次，找出出现一次的数字
	- [2,3,4,3,2,5,5]
  	- 遍历数组中的数字，一直执行异或操作
  	- 2 ^ 3 ^ 4 ^ 3 ^ 2 ^ 5 ^ 5 => 4 


